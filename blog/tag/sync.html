<!DOCTYPE html>
<html lang="en">
<head>
    <title>Feature creep designer - sync</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=0.8, minimum-scale=0.8" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <link rel="stylesheet" href="http://lqez.github.io/blog/theme/css/main.css" type="text/css" />
        <link href="http://lqez.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Feature creep designer Atom Feed" />
                <link rel="apple-touch-icon" href="static/images/icons/fcd-57.png"/>
            <link rel="apple-touch-icon" sizes="72x72" href="static/images/icons/fcd-72.png"/>
            <link rel="apple-touch-icon" sizes="114x114" href="static/images/icons/fcd-114.png"/>
    
    <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

    <!--[if lte IE 7]>
        <link rel="stylesheet" type="text/css" media="all" href="http://lqez.github.io/blog/css/ie.css"/>
        <script src="http://lqez.github.io/blog/js/IE8.js" type="text/javascript"></script><![endif]-->

    <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" media="all" href="http://lqez.github.io/blog/css/ie6.css"/><![endif]-->
</head>
<body id="index" class="home">
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/ko_KR/all.js#xfbml=1&appId=465940413466203";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
    <header id="banner" class="body">
        <h1><a href="http://lqez.github.io/blog/">Feature creep designer </a></h1>
        <h2 id="greeting">Happy day.</h2>
    </header><!-- /#banner -->
            
            

                            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="http://lqez.github.io/blog/sync-ldap-to-google-apps-account-via-gads.html">Sync LDAP to Google Apps account via GADS</a></h1> 
                    <footer class="post-info">
                <abbr class="published" title="2013-02-26T00:00:00">
                Tue 26 February 2013
        </abbr>

</footer><!-- /.post-info --><p>Google은 - 친절하게도 - Google Apps 계정을 외부 서버와 동기화할 수 있는 기능을 제공할 뿐 아니라, 이를 위한 도구도 배포하고 있다.</p>
<ul>
<li><a href="http://support.google.com/a/bin/answer.py?answer=172212">Google Apps Migration for Microsoft Exchange</a></li>
<li><a href="http://support.google.com/a/bin/answer.py?answer=106368">Google Apps Directory Sync</a></li>
<li><a href="http://support.google.com/a/bin/answer.py?answer=2611842">Google Apps Password Sync</a></li>
</ul>
<p>스마트스터디는 사내 계정을 이미 LDAP으로 통합 운용중이라서, Google Apps Directory Sync(이하 GADS)를 선택하였다.</p>
<ul>
<li><a href="http://www.google.com/support/enterprise/static/gapps/docs/admin/en/gads/admin/">Google Apps Directory Sync Administration Guide(in PDF)</a></li>
</ul>
<p>GADS는 단방향 즉, LDAP에서 GADS로의 동기화만을 제공한다. 동기화 가능한 항목은 아래와 같다.</p>
<ul>
<li>Organizational Units</li>
<li>Users Accounts</li>
<li>Groups</li>
<li>User Profiles</li>
<li>Shared Contacts</li>
<li>Calendar Resources</li>
</ul>
<p>GADS Configuration Tool은 자바를 이용한 GUI로 작성되어 있는데, 현재는 Windows / Linux 용만 제공된다. 이 툴을 통해 설정한 내용은 XML로 저장되고, 이 파일은 플랫폼 무관하게 사용할 수 있으므로, 일단 가상 머신의 Windows로 설정을 완료한 후에, 설정 파일을 복사하여 Linux에서 사용하였다.</p>
<p><img alt="Screen Shot of GADS" src="./static/images/gads_01.png" /></p>
<p>Linux용 GADS는 커맨드라인에서 설치하면 동의항목이 HTML로 출력되지만, 계속 엔터키를 입력해 넘기며 진행하면 설치가 가능하다.
root 계정으로 설치하는 경우에 /usr/local/GoogleAppsDirSync 에 설치가 되고, 이 디렉토리 아래에 있는 <code>sync-cmd</code> 쉘 스크립트를 통해 동기화를 수행하면 된다.</p>
<div class="codehilite"><pre><span class="err">$</span> <span class="p">.</span><span class="o">/</span><span class="n">sync</span><span class="o">-</span><span class="n">cmd</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">configuration_file</span><span class="p">.</span><span class="n">xml</span><span class="o">&gt;</span>
</pre></div>


<p>위와 같이 실행하면 비교만 하고, 실제로 동기화는 하지 않는 dry-run으로 실행되고,</p>
<div class="codehilite"><pre><span class="err">$</span> <span class="p">.</span><span class="o">/</span><span class="n">sync</span><span class="o">-</span><span class="n">cmd</span> <span class="o">-</span><span class="n">a</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">configuration_file</span><span class="p">.</span><span class="n">xml</span><span class="o">&gt;</span>
</pre></div>


<p><code>-a</code> 옵션을 추가해야 실제 동기화가 이뤄진다. 현재는 위 명령을 cron에 넣어 5분 마다 동기화 하도록 설정해두었다.</p><script src="//platform.twitter.com/widgets.js" charset="utf-8"></script><footer class="post-info-footer">
                <p>
        In <a href="http://lqez.github.io/blog/category/2013-02.html">2013-02</a>. 
                </p>
        <p>tags: <a href="http://lqez.github.io/blog/tag/ldap.html" class="tag">ldap</a><a href="http://lqez.github.io/blog/tag/google.html" class="tag">google</a><a href="http://lqez.github.io/blog/tag/gads.html" class="tag">gads</a><a href="http://lqez.github.io/blog/tag/sync.html" class="tag">sync</a></p></footer><!-- /.post-info -->                                        <div class="fb-comments" data-href="http://lqez.github.io/blog/sync-ldap-to-google-apps-account-via-gads.html" data-width="0" data-num-posts="5"></div>
                                    </article>
                                    <p class="paginator">
        Page 1 / 1
    </p>
                            </aside><!-- /#featured -->
                                                </ol><!-- /#posts-list -->
                        </section><!-- /#content -->
                <section id="extras" class="body">
            </section><!-- /#extras -->

    <footer id="contentinfo" class="body">
    <!--
        <nav><ul>
                                                    <li ><a href="http://lqez.github.io/blog/category/2013-02.html">2013-02</a></li>
                    <li ><a href="http://lqez.github.io/blog/category/2013-04.html">2013-04</a></li>
                    <li ><a href="http://lqez.github.io/blog/category/2013-05.html">2013-05</a></li>
                    <li ><a href="http://lqez.github.io/blog/category/2013-08.html">2013-08</a></li>
                    <li ><a href="http://lqez.github.io/blog/category/2013-10.html">2013-10</a></li>
                    <li ><a href="http://lqez.github.io/blog/category/2014-07.html">2014-07</a></li>
                    <li ><a href="http://lqez.github.io/blog/category/uncategorized.html">Uncategorized</a></li>
                </ul></nav>
        -->
        <address id="about" class="vcard body">
        Published by <a href="http://getpelican.com/">Pelican</a> / <a href="http://python.org">Python</a>.
        <p id="theme"><a href="https://github.com/lqez/42signals-pelican-theme">42 signals theme by lqez</a></p>
        </address><!-- /#about -->
    </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37711911-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>
<script language="javascript">
var weekday = new Array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");
var dayOfWeek = weekday[new Date().getDay()];
document.getElementById('greeting').innerHTML = "Happy " + dayOfWeek + ".";
</script>
</html>